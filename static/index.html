<!DOCTYPE html>
<html>
<head>
    <title>축구 하이라이트 생성기</title>
</head>
<body>
    <h1>축구 영상 업로드</h1>
    <input type="file" id="videoFile">
    <button onclick="uploadVideo()">하이라이트 생성 시작</button>
    <p id="status"></p>
    <div id="result"></div>
    <script>
        async function uploadVideo() {
            const fileInput = document.getElementById('videoFile');
            const statusElem = document.getElementById('status');
            const resultElem = document.getElementById('result');

            const formData = new FormData();
            formData.append('video', fileInput.files[0]);

            statusElem.textContent = '업로드 및 처리 중... (시간이 오래 걸릴 수 있습니다)';
            resultElem.innerHTML = '';

            // FastAPI의 /upload-video/ API 호출
            const response = await fetch('/upload-video/', {
                method: 'POST',
                body: formData
            });

            const data = await response.json();

            statusElem.textContent = data.message;

            // 결과 파일 다운로드 링크 생성
            const resultLink = `<a href="/get-highlight/${data.result_filename}" download>${data.result_filename} 다운로드</a>`;
            resultElem.innerHTML = resultLink + '<p>파일이 아직 준비되지 않았다면 잠시 후 다시 시도해주세요.</p>';
        }
    </script>
</body>
</html>